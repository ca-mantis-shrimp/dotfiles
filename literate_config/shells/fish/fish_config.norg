@document.meta
title: Fish Config
description: Configuring the Fish Shell
authors: primary_desktop
categories: Shells Fish
tangle: ../../../dot_config/fish/config.fish.tmpl
created: 2025-07-20T20:22:17-0800
updated: 2025-12-21T00:40:53-0800
version: 1.1.1
@end
Fish is our primary shell these days so its good to get a bit familiar with the format 

the nice part about fish is we really dont need to do much, since we are working with a shell that works really well out of the box we just have a few pieces and even these are subject to change

* Fish Setup
  Fish just has a standard config file in the fish language, as one would expect

working through this we are working to get some of our environments setup so that we are able

** Environment Variables
   working on the environment variables 

*** New Environment Variables
    We are going to set some environment variables that are more about configuring our tools rather than the more systemic pieces
    #tangle
    @code fish
    set -xg WWW_HOME "http://www.duckduckgo.com"
    set -xg EDITOR "nvim"
    set -xg PAGER "nvim +Man!"

    set -xg npm_config_prefix "$HOME/.local"
    @end
    - setting `WWW_HOME` to duckduckgo makes it so that terminal browsers have a homepage set
    - setting `EDITOR` to nvim makes it so that any application that respects the editor
    - `PAGER` Lets us use several formats to actually work these pieces out

*** PATH APPENDS
    Next, we just need to append a few things to our PATH so that we can find our binaries properly
    #tangle
    @code fish
    fish_add_path "$HOME/.cargo/bin"
    fish_add_path "$HOME/.local/bin"
    @end
** Querying for 1password credentials
*** Ensuring we are using the right op
    The first thing we need to do is ensure that if we are on WSL, we are actually using the windows version of op since it is more deeply integrated with the desktop app and will work better
    #tangle
    @code fish
    {{ if eq .chezmoi.os "linux" }}
    {{ if (contains "Microsoft" .chezmoi.kernel.osrelease) }}
    alias op="op.exe"
    {{ end }}
    {{ end }}
    @end
** Binding and Commands
Now we just have a few things to setup for fish itself, mostly key bindings and commands to start neovim in neovide properly

   #tangle
   @code fish
   fish_vi_key_bindings
   function SpawnNeovideWindow
	   systemctl --user start neovide-client
   end
   @end
   - we setup fish vi key bindings since we are used to that mode of operation
   - we also setup a function to spawn neovide windows properly using systemd
   -- be sure to review {:$/neovim/services/client/neovide-client.norg:}[the neovide client service] for more details
** Prompt and startup screen
   Finally we go ahead and run the starship init for fish since that is our prompt
   and we run nerdfetch
   do not, both of these need to be install and available this is the only part where we are actually running something that could be missing so this is the part that might break on a new machine if they arent setup yet

   #tangle
   @code fish
   starship init fish | source

   nerdfetch
   @end

* credentials
  it is assumed that credentials are handled either at runtime, or they are actually configured on a per-app configuration basis.

  This ensures that configuration for things like `claude`, `copilot` and `gemini` get what they need WITHOUT using our work in this format such that we cant get it working without op.

  This kinda undoes the problems ive been having with the local phone config too since we have removed the hard dependency on `op` and are just going to leverage native completion.

  still dont know but we will see how it goes then it comes down to it

  for the usecases be sure to review:
  - `systemd-creds` for service credentials
  - `op run` for running applications live
  - op shell plugins that will allow us to generate configs at runtime and erase them later

  with these we should be able to work WITHOUT having our secure keys in the environment just lying around
