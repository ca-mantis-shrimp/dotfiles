# Assumes that the local .env file holds OP service account token
export (envsubst < ~/.env)

set -gx WWW_HOME "http://www.duckduckgo.com"


# Assumes $OP_SERVICE_ACCOUNT_TOKEN is set prior set -gx ANTHROPIC_API_KEY {{ onepasswordRead "op://Back-End/anthropic_api_key/credential" }}
set -gx TODOIST_API_KEY {{ onepasswordRead "op://Back-End/todoist_api_key/credential" }}
set -gx GROQ_API_KEY {{ onepasswordRead "op://Back-End/groq_api_key/password" }}
{{- if eq .chezmoi.hostname "USSFODARBURGES3" }}
set -gx SNOW_MIRROR_DADBOD = {{ onepasswordRead "op://work/SNOWMIRROR/dadbod" }}
{{ else }}
set -gx OPENAI_API_KEY {{ onepasswordRead "op://Back-End/copilot_api_oath/credential" }}
set -gx OPENROUTER_API_KEY {{ onepasswordRead "op://Back-End/OpenRouter/api_key" }}
{{- end}}

function RestartNvimServer
    systemctl --user restart neovim-server
end

function SpawnNeovideWindow
    systemctl --user start neovide-window.service
end

fish_add_path --append --path ~/.cargo/bin
	

# Switch to VI bindings
fish_vi_key_bindings

# Get Starship running as prompt
starship init fish | source

# Finally, start your splash screen!
nerdfetch
